pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
	score=0
	poke(0x5f2d, 1)--enable cursor
	
	-- initialize mouse variables properly
	mouse_btn = 0
	mouse_btn_prev = 0
	mouse_x = 0
	mouse_y = 0
	
	targets={}
	for i=1,20 do
		make_target(rnd(128),rnd(128))
	end
end

function _draw()
	cls()
	
	foreach(targets,draw_target)
	draw_mouse(mouse_x,mouse_y)
	
	if(mouse_clicked(1))then
		print("mouse 1 clicked!")
	end
	print("x:"..mouse_x.." y:"..mouse_y)
	print("score: " ..score,0,10)
	
end

function _update60()
	mouse_btn_prev = mouse_btn
	mouse_btn = stat(34)
	mouse_x = stat(32)
	mouse_y = stat(33)
	
	-- check for clicks on targets (do this once per frame)
	if mouse_clicked(1) then
		check_target_clicks()
	end
	
	foreach(targets,update_target)
end

function mouse_clicked(btn_num)
	return mouse_btn == btn_num and mouse_btn_prev != btn_num
end

function check_target_clicks()
	for t in all(targets) do
		-- check if mouse is within target bounds (8x8 sprite)
		if mouse_x >= t.x-8 and mouse_x < t.x + 8 
		and mouse_y >= t.y-8 and mouse_y < t.y + 8 then
			del(targets,t)
			score += 10
			-- add a new target to replace the one we destroyed
			make_target(rnd(120), rnd(120))
			break -- only hit one target per click
		end
	end
end

function make_target(x,y)
	local t={}
	t.x=x
	t.y=y
	t.sprite=2
	add(targets,t)
end

function update_target(t)
	-- slower, more subtle movement
	t.x += rnd(0.5) - 0.25
	t.y += rnd(0.5) - 0.25
	
	-- remove targets that go off screen
	if(t.x < 0 or t.x > 128 
	or t.y < 0 or t.y > 128) then
		del(targets,t)
		-- add a new target to replace the one that left
		make_target(rnd(120), rnd(120))
	end
end

function draw_target(t)
	spr(t.sprite,t.x,t.y)
end

function draw_mouse(x,y)
	spr(1,x,y)
end
-->8
function draw_mouse(x,y)
	spr(1,x,y)
end
__gfx__
00000000000bb0000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000bb0000877778000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000bb0008778877800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbb00bbb878aa87800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbb00bbb878aa87800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000bb0008778877800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000bb0000877778000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000bb0000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
60600000666060000000606000006660666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
60600600606060000000606006000060606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000000666066600000666000000660666000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000
60600600606060600000006006000060006000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000
60600000666066600000666000006660006000000000877887780000000000000000000000000000000000000000000000000000000000000000000000000000
00088880000000000000000000000000000000000000878aa8780000000000000000000000000000000000000000000000000000000000000000000000000000
00877778000000000000000000000000000000000000878aa8780000000000000000000000000000000000000000000000000000000000000000000000000000
08778877800000000000000000000000000000000000877887780000000000000000000000000000000000000000000000000000000000000000000000000000
0878aa87800000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000
0878aa87800000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000
06678667866066606660000000006060606066600000000000000088880000000000000000000000000000000000000000000000000000000000000000000000
60876778606060606000060000006060606060600000000000000877778000000000000000000000000000000000000000000000088880000000000000000000
66686880606066006600000000006660666060600000000000008778877800000000000000000000000000000000000000000000877778000000000000000000
0060600060606060600006000000006000606060000000000000878aa87800000000000000000000000000000000000000000008778877800000000000000000
6600066066006060666000000000006000606660000000000000878aa8780000000000000000000000000000000000000000000878aa87800000000000000000
0000000000000000000000000000000000000000000000000000877887780000000000000000000000000000000000000000000878aa87800000000000000000
70000000077077707070777088880000000000000000000000000877888800000000000000000000000000000000000000000008778877800000000000000000
07000000700070707070700088880000000000000000000000000088777780000000000000000000000000000000000000000000877778000000000000000000
00700000777077707070770088880000000000000000000000000087788778000000000000000000000000000000000000000000088880000000000000000000
070000000070707077707000888800000000000000000000000000878aa878000000000000000000000000000000000000000000000000000000000000000000
700000007700707007007770888800000000000000000000088880878aa878000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000087777887788778000000000000000000000000000000000000000000000000000000000000000000
0000000878aa87800000000000000000000000000000000877887788777780000000000000000000000000000000000000000000000000000000000000000000
00000008778877800000000000000000000000000000000878aa8780888800000000000000000000000000000000000000000000000000000000000000000000
00000000877778000000000000000000000000000000000878aa8780000000000000000000000000000000000000000000000000000000000000000000000000
00000000088880000000000000000000000000000000000877887780000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb00bbb0000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb00bbb0000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000008888000000000000000000000000000000000000000000000000bb0000000000000000000000000000000000000
00000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000877887788888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000878aa8787777800000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000878aa8787887780000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000877887788aa8780000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000087777878aa8780000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000008888877887780000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000877887780000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000878aa8780000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000878aa8780000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000877887780000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000008777780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000087788778000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000878aa878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000878aa878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000087788778000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088880000000000000000
00000008777780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000877778000000000000000
00000000888800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008778877800000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000878aa87800000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000878aa87800000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008778877800000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000877778000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088880000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000877778000000000000088880000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000008778877800000000000877778000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000878aa87800000000008778877800000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000878aa8780000000000878aa87800000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000877887780000088880878aa87800000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000877778000008777788778877800000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000088880000087788778877778000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000878aa878088880000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000878aa878000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000087788778000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000008777780000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000888800000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000088880000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000877778000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000008778877800000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000878aa87800000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000878aa87800000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000008778877800000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000877778000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000088880000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000877887780000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000878aa8780000000008888000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000878aa8780000000087777800000000000000000000000000000000000000000000000
00000000000000000000000000000008888000000000000000000000000877887780000000877887780000000000000000000000000000000000000000000000
00000000000000000000000000000087777800000000000000000000000087777800000000878aa8780000000000000000000000000000000000000000000000
00000000000000000000000000000877887780000000000000000000000008888000000000878aa8780000000000000000000000000000000000000000000000
00000000000000000000000000000878aa8780000000000000000000000000000000000000877887780000000000000000000000000000000000000000000000
00000000000000000000000000000878aa8780000000000000000000000000000000000000087777800000000000000000000000000000000000000000000000
00000000000000000000000000000877887780000000000000000000000000000000000000008888000000000000000000000000000000000000000000000000
00000000000000000000000000000087777800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

