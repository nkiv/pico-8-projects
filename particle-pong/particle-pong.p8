pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
	menu_init()
end

function menu_init()
	_update=menu_update
	_draw=menu_draw
end

function menu_update()
	if(btnp(‚ùé))then
		game_init()
	end
end

function menu_draw()
	cls()
	print("welcome to particle pong",17,55,7)
	print("press ‚ùé to play!",30,65,8)
end

-->8
function game_init()
	_update=game_update
	_draw=game_draw
	smoke={}
	smokex=58
	smokey=50
	smokexdir=2
	smokeydir=-2.5
	color=7
	--p for player or paddle
	p={}
	p.x=52
	p.y=122
	p.w=24
	p.h=4
	
	score=0
	lives=3
end

function game_update()
	if(lives==0) then
		gameover_init()
	else
		foreach(smoke,move_smoke)
		update_smoke()
		update_player()
	end
end

function game_draw()
	cls()
	draw_stars()
	foreach(smoke,draw_smoke)
	print("score:"..score)
	print("üÖæÔ∏è color smoke",70,0)
	draw_player()
	for i=1,lives do
		spr(1,90+i*8,4)
	end
end


function make_smoke(x,y,init_size,col)
	local s={}
	s.x=x
	s.y=y
	s.col=col
	s.width=init_size
	s.width_final=init_size+rnd(3)+1
	s.t=0
	s.max_t=30+rnd(10)
	s.dx=(rnd(.8)*.4)
	s.dy=rnd(0.5)
	s.ddy=-.05
	add(smoke,s)
	return s
end


function move_smoke(sp)
	if(sp.t>sp.max_t)then
		del(smoke,sp)
	end
	if(sp.t>rnd(1000))then
		sp.width+=1
		sp.width=min(sp.width,sp.width_final)
	end
	sp.x=sp.x+sp.dx
	sp.y=sp.y+sp.dy
	sp.dy=sp.dy+sp.ddy
	sp.t=sp.t+5
end

function update_smoke()
	if(btn(4,0))then 
		color=flr(rnd(16))
	end
	
	--move smoke center
	smokex+=smokexdir
	smokey+=smokeydir
	
	if	(smokey>=p.y 
	and not(smokex<=p.x  
	or smokex>=p.x+p.w))then
				smokeydir=-smokeydir
				score+=10
		else
	end
	
	--bounds
	if(smokex<0)then 
		smokex=0
		smokexdir=-smokexdir
	end
	if(smokex>127)then
	 smokex=127
	 smokexdir=-smokexdir
	end
	if(smokey<0)then
	 smokey=0
	 smokeydir=-smokeydir
	end
	if(smokey>127)then 
		smokex=58
		smokey=48
		smokeydir=-2.5
		lives-=1
	end
	
	make_smoke(smokex,smokey,
	rnd(4),color)
end



function draw_smoke(s)
	fillp()
	circfill(s.x,s.y,s.width,s.col)
	fillp()
end

function draw_player()
	rectfill(p.x,p.y,
		p.x+p.w,p.y+p.h,
		7)
end

function update_player()
	if(btn(0))then p.x-=2 end
	if(btn(1))then p.x+=2 end
	
	if(p.x+p.w>128)then 
		p.x=128-p.w
	end
	if(p.x<0)then
		p.x=0
	end
end

function draw_stars()
	srand(1)
	for i=1,30 do
		circfill(rnd(128),rnd(128),
		rnd(2),5+rnd(2))
	end
	srand(time())
end	
-->8
function gameover_init()
	_update=gameover_update
	_draw=gameover_draw
end

function gameover_update()
	if(btnp(‚ùé))then
		menu_init()
	end
end

function gameover_draw()
	cls()
	print("game over!",44,55)
	print("score:"..score,49,65)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888887800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888868800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
07700770077077707770000077700000000000000000000000000000000000000000000777770000000770077070000770777000000770777007707070777000
70007000707070707000070070700000000000000000000000000000000000000000007700077000007000707070007070707000007000777070707070700000
77707000707077007700000070700000000000000000000000000000000000000000007707077000007000707070007070770000007770707070707700770000
00707000707070707000070070700000000000000000000000000000000000000000007700077000007000707070007070707000000070707070707070700000
77000770770070707770000077700000000000000000000000000000000000000000000777770000000770770077707700707000007700707077007070777000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088088000880880008808800000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888887808888878088888780000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888868808888688088886880000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888000888880008888800000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000008880000088800000888000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000005550000000000000800000008000000080000000000
00000000500000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006660000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077700
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777770
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777770
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777770
00060000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600077700
00000000000000000000005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000
00000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007770000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700700000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000077770000000
00000000000000000000000000000000000000000000000666000000000000000000000000000000000000000000000000000000000000000000777770000000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000777770000000
00000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000077777770000000
00000000000000000000000060000000000000000000555000000000000000000000000000000000000000000000000000000000000000000777777700000000
00000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000007777770000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777770000005000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000007777777700000000000
00000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000666000077777777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000077777777000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777770000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777700000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000777000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000
00000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000066600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000
00000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055500000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000005000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000005550000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000005000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000005550000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007777777777777777777777777000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007777777777777777777777777000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007777777777777777777777777000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000007777777777777777777777777000000000000000000000000000000000006000000000000000
00000000000000000000000000000000000000000000000000007777777777777777777777777000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

