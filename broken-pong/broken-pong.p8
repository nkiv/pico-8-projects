pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
--glitch ball
--nkiv
function _init()
	menu_init()
end

function menu_init()
	_update=menu_update
	_draw=menu_draw
	
end

function menu_update()
	if(btnp(üÖæÔ∏è))then
		game_init()
	end
	
	
end

function menu_draw()
	cls()
	print("welcome to particle pong",17,55,7)
	print("press ‚ùé to play!",30,65,8)
	if(btn(‚ùé))then
		print("oops wrong button, hit üÖæÔ∏è",15,75,7)
	end
end
-->8
function game_init()
	_update=game_update
	_draw=game_draw
	smoke={}
	smokex=58
	smokey=50
	smokexdir=2
	smokeydir=-2.5
	color=7
	--p for player or paddle
	p={}
	p.x=52
	p.y=122
	p.w=24
	p.h=4
	
	score=0
	lives=3
	
	t=0
end

function game_update()
	if(lives==0) then
		gameover_init()
	else
		foreach(smoke,move_smoke)
		update_smoke()
		update_player()
		fuck_player()
	end
end

function game_draw()
	cls()
	draw_stars()
	foreach(smoke,draw_smoke)
	print("score:"..score)
	print("üÖæÔ∏è color smoke",70,0)
	draw_player()
	for i=1,2 do --incorrect!
		spr(1,90+i*8,4)
	end
end


function make_smoke(x,y,init_size,col)
	local s={}
	s.x=x
	s.y=y
	s.col=col
	s.width=init_size
	s.width_final=init_size+rnd(3)+1
	s.t=0
	s.max_t=30+rnd(10)
	s.dx=(rnd(.8)*.4)
	s.dy=rnd(0.5)
	s.ddy=-.05
	add(smoke,s)
	return s
end


function move_smoke(sp)
	if(sp.t>sp.max_t)then
		del(smoke,sp)
	end
	if(sp.t>rnd(1000))then
		sp.width+=1
		sp.width=min(sp.width,sp.width_final)
	end
	sp.x=sp.x+sp.dx
	sp.y=sp.y+sp.dy
	sp.dy=sp.dy+sp.ddy
	sp.t=sp.t+5
end

function update_smoke()
	if(btn(4,0))then 
		color=flr(rnd(16))
	end
	
	--move smoke center
	smokex+=smokexdir
	smokey+=smokeydir
	
	if	(smokey>=p.y 
	and not(smokex<=p.x  
	or smokex>=p.x+p.w))then
				smokeydir=-smokeydir
				score+=10
		else
	end
	
	--bounds
	if(smokex<0)then 
		smokex=0
		smokexdir=-smokexdir
	end
	if(smokex>127)then
	 smokex=127
	 smokexdir=-smokexdir
	end
	if(smokey<0)then
	 smokey=0
	 smokeydir=-smokeydir
	end
	if(smokey>127)then 
		smokex=58
		smokey=48
		smokeydir=-2.5
		lives-=1
	end
	
	make_smoke(smokex,smokey,
	rnd(4),color)
end



function draw_smoke(s)
	fillp()
	circfill(s.x,s.y,s.width,s.col)
	fillp()
end

function draw_player()
	rectfill(p.x,p.y,
		p.x+p.w,p.y+p.h,
		7)
end

function update_player()
	if(btn(0))then p.x-=2 end
	if(btn(1))then p.x+=2 end
	
	if(p.x+p.w>128)then 
		p.x=128-(p.w*2) --intentional bug
	end
	if(p.x<0)then
		p.x=0+p.w --intentional bug hehe
	end
end

function draw_stars()
	srand(1)
	for i=1,30 do
		circfill(rnd(128),rnd(128),
		rnd(2),5+rnd(2))
	end
	srand(time())
end	

--should randomly move paddle
--every 20 seconds
function fuck_player()
	if(t%10==0)then
		p.x+=(rnd(40)-20)
	end
	t+=.0625
end
-->8
function gameover_init()
	_update=gameover_update
	_draw=gameover_draw
end

function gameover_update()
	if(btnp(‚ùé))then
		menu_init()
	end
end

function gameover_draw()
	cls()
	print("game over!",44,55)
	print("score:"..score-10)
	print("i think?")
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888887800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000888868800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
08800880088088808880000088800000000000000000000000000000000000000000000888880000000880088080000880888000000880888008808080888000
80008000808080808000080080800000000000000000000000000000000000000000008800088000008000808080008080808000008000888080808080800000
88808000808088008800000080800000000000000000000000000000000000000000008808088000008000808080008080880000008880808080808800880000
00808000808080808000080080800000000000000000000000000000000000000000008800088000008000808080008080808000000080808080808080800000
88000880880080808880000088800000000000000000000000000000000000000000000888880000000880880088808800808000008800808088008080888000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088088000880880000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888887808888878000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888868808888688000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888000888880000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000008880000088800000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000005550000000000000800000008000000000000000000
00000000500000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006660000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00060000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000
00000000000000000000005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000666000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000060000000000000000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008880000000005000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888888000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000008888888000000000000
00000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000666000088888888000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000088888880000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888880000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888800000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000008888000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000006000000000
00000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000066600000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088880000000000006000000000
00000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000888880000000000000000000000
00000000000000000000000000066600000000000000000000000000000000000000000000000000000000000000000000008888888000000000000000000000
00000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000008888888000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888888000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888880000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088888800000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088808880000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888880000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008888888000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000888880000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088800000000000000000000000000000
00000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055500000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000005000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000005550000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000005000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000005550000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000077777777777777777777777770000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000077777777777777777777777770000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000077777777777777777777777770000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000077777777777777777777777770000000000000000000000000000006000000000000000
00000000000000000000000000000000000000000000000000000000077777777777777777777777770000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

